on:
  push:
  pull_request:
  workflow_dispatch:
  schedule:
    - cron:  '0 19 * * 2'

jobs:
  jenkins-versions:
    strategy:
      matrix:
        version: [lts, 2.346.1, 2.332.4]
    runs-on: ubuntu-latest
    name: test on jenkins-${{ matrix.version }}
    steps:
      - uses: actions/checkout@v3
      - name: test jenkins-${{ matrix.version }}
        uses: ./jenkins-lts/
        with:
          version: ${{ matrix.version }}


  jenkins-last:
    runs-on: ubuntu-latest
    name: test on jenkins last good version
    steps:
      - uses: actions/checkout@v3
      - name: test jenkins-last
        uses: ./jenkins-last/
